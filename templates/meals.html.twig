{% extends "crm/base_list.html.twig" %}

{% block title %}Administrace - {{ header }}{% endblock %}
{% block list_header %}{{ header|upper }}{% endblock %}
{% block addbtn %}<a href="{{ path(add_route_name) }}" class="btn btn-primary">Přidat jídlo</a>{% endblock %}

{% block table %} 
    <table class="table table-striped table-hover">
        <thead>

            {% set directionParam = (app.request.get("direction")|lower == "asc") ? "desc" : "asc" %}
            {% set directionParamIcon = (app.request.get("direction")|lower == "asc") ? "keyboard_arrow_down" : "keyboard_arrow_up" %}
            {% set activeSortItem = app.request.get("orderBy")|lower %}

            <tr class="text-center">
                <th class="text-start ps-2">
                    <a href="{{ path(list_route_name, {orderBy: "name", direction: (activeSortItem == "name") ? directionParam : "asc"}) }}">
                        {{ "Název"|upper }} 
                        <i class="material-icons sort-icon">{{ (activeSortItem == "name") ? directionParamIcon : "keyboard_arrow_up" }}</i>
                    </a>
                </th>
                <th>
                    <a href="{{ path(list_route_name, {orderBy: "price", direction: (activeSortItem == "price") ? directionParam : "asc"}) }}">
                        {{ "Cena"|upper }} 
                        <i class="material-icons sort-icon">{{ (activeSortItem == "price") ? directionParamIcon : "keyboard_arrow_up" }}</i>
                    </a>
                </th>
                <th>
                    <a href="{{ path(list_route_name, {orderBy: "section", direction: (activeSortItem == "section") ? directionParam : "asc"}) }}">
                        {{ "Sekce"|upper }} 
                        <i class="material-icons sort-icon">{{ (activeSortItem == "section") ? directionParamIcon : "keyboard_arrow_up" }}</i>
                    </a>
                </th>
                <th>
                    <a href="{{ path(list_route_name, {orderBy: "course", direction: (activeSortItem == "course") ? directionParam : "asc"}) }}">
                        {{ "Chod"|upper }} 
                        <i class="material-icons sort-icon">{{ (activeSortItem == "course") ? directionParamIcon : "keyboard_arrow_up" }}</i>
                    </a>
                </th>
                <th>
                    <a href="{{ path(list_route_name, {orderBy: "invisible", direction: (activeSortItem == "invisible") ? directionParam : "asc"}) }}">
                        {{ "Skrytý"|upper }} 
                        <i class="material-icons sort-icon">{{ (activeSortItem == "invisible") ? directionParamIcon : "keyboard_arrow_up" }}</i>
                    </a>
                </th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% if Entities is not defined %}
                <tr class="align-middle">
                    <td>Aktuálně není vytvořeno žádné jídlo</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
            {% else %}
                {% for Meal in Entities %}
                    <tr class="align-middle text-center">
                        <td class="name text-start">{{ Meal.name }}</td>
                        <td>{{ Meal.price }},- Kč</td>
                        <td class="course">{{ Meal.section.name }}</td>
                        <td>{{ Meal.course.name }}</td>
                        <td>{{ Meal.invisible is same as true ? "Ano" : "Ne" }}</td>
                        <td class="buttons">
                            <a href="{{ path(edit_route_name, {id: Meal.id}) }}" class="btn btn-primary btn-sm my-1">Upravit</a>
                            <a href="{{ path(remove_route_name, {id: Meal.id}) }}" class="btn btn-primary btn-sm my-1">Smazat</a>
                            <a href="{{ path(add_route_name, {id: Meal.id}) }}" class="btn btn-primary btn-sm my-1">Kopírovat</a>
                        </td>
                    </tr>                
                {% endfor %}
            {% endif %}
        </tbody>
    </table>

    <style>
        td.name {
            min-width: 250px !important;
            white-space: normal !important;
        }

        td.course {
            min-width: 220px !important;
            white-space: normal !important;
        }

        td.buttons {
            white-space: normal !important;
        }

        .ws-normal {
            white-space: normal !important;
        }

        i.sort-icon {
            vertical-align: middle;
            margin-top: -5px;
        }
    </style>
{% endblock %}